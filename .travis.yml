language: java
cache:
  directories:
  - "$HOME/.m2"
jdk:
- oraclejdk8
sudo: required
services:
- docker
notifications:
  slack:
    secure: HAkVJBgThf2WBBz7LQtf+aRQd41sWNibfNWgjLMcMFk0wuTs3RDkE8KK0Jxe5MRmdg2GGU6LLoeD5miRdsgQ15gpAKYgy8S8vM6MYN15uk5Ky1kNvjeSICIxxdjDPKBYyU5sx/2KtqZcNQNsTwHUmF3Tw5V5dOCUYlQ3KrOSlck6j80sPs+McVyvma2uN1ewL7qDSf4AHOW7yycxXCZeHJvwtyPO9AT9HKOerDi/cu9PewpGNd6KW2WmKj+1SkQnEi3wYcD673ZyV3OXxorGUCPzA/Sen2dixJ2ONqc4EosF5mPnTFXwdWTAkvY4u8c5xonCcNrgkzuz6Hew0VAs9ozj6A3KULt6ZLEeKmTE8JB5GA10vdf+w9R7YC2CTjLY1SUrtHNbjKgV7VhKcqZ1oa0cX0B/HpxmfYQlyBU1LGLXfuSsbg3DMVwWP8qCmNHSD9qhsU+xgSAXpkP3v7vWbJpF/H0q+LC0UicZez5kh62xjR1RcEioWjKgdMOw4aSOnYH7Js8qLyiueeB5uCSUOZDlZ/QRg05wNvigyDHJrBk6EUhlgSHwpCVQ4ihM3YAvrwZNvHQE8EmsGvj49aGKDqF7fteiSEEdRyQq8eXC17NQnj4qpv2IhtdPquUVdZ/pM0wRlXdKPoPpXGy0mp/KJ1y9oSiqaYoGRhp1qOuivkQ=
  email:
  - anthony.denecheau@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: IZlJb73JFnTmcuDyd3RVOLWc0d+EDQJSQ3uHzwqjoRpo44dMpDdYNWk5gQOgFRHLVFnUPsMBS4R4tDDJChHv7RG4stGgwYf1v/baAZpgRqlnG2c+Fiu5WqG3PbHlkbp6dzLm6siVSyKoC8mwlmMMvx2e0A41UihZ8EUP2iqOlUTwLXwg/XrMWLfLaprXfwWY9JNT4749zCGeKO3g9+txpjx9okquq9M/RqmOxUGX/v2ZtqxT2m7XzJNjMw+//yV/T5gttN814b4kMn9YzNnWqf0QceEbFJ0ti4t+NMCMXpLNpOB/EMyjZGebw64oIeRPAlXnH0R9mLYZ1aur8rFf7K1dYtR2ZAwZDudjAt8qCQMMWqZGaS2O6CB5fGkowAhoEiW4a4WrGg4Jzw7uokN24hyBTiqmULSdZ/3JhBDD8iFMofjoXEtrFD/AEStq5GXDnyOUFVrzFC3juYfZKJXwsMgD6losrndWQ91otZxjdSAsT7DnFXq7e4EFwuwpby2IkoiO2wAWgSBI5emkuMo1Fi98rKJu6cAB+wF1jbMHOwvD+BJKcJxT1p3kZx4w3IZ7KxdVoER7PxRiibNJx2f5V24m5DHD3iUMtNEkikeZ5hHDch9xs3DYcjzvnL8lnwJArGoC0HJ9JqEaYqa9D8dTcd1gy2HIC0vLqiENsHxu0X0=
  - secure: tWMuIJKZKJh0ma6n5/8wwTTLtApsAN1zCRCbmbJf+/3538vwCxVLjloxWGiL5KCyfMCl42evmKu/NBc5c23khQ33SaQkzX5S9SeyusozbkOx582RnfixWnvyWH/QYNvOYV0ShqsW0TK+4RdLNNEnbsgqCLcr9btGDLJej1gmQokPKIRjMNjuJyF1wnYNpyduMnNkLGrNdB+EhIwfOp8qqaP1OTJUShn/zrTRCgBgNzX3wjt9YHTfvIWusYHQVLDtGZhIIQMOqQ/2pcnskubLIPEcjuGoJ8P6bnb6vz7AnVdBOXyp+3Mm/HCBQinQAiTz8h9J1jJ3f/0o6IRry4EYK8dOC95XKL7LHQyNVgJCxFLBDFTLOLtUSmBw+MrAUbPcof4oxClFlGPRIfEDO1K05tgKlHHsUi3jqCCs/vX17xQ82KxwF+vx17tuNqPglu90CBdfnBAxbd9ic1hUI/VPFTDgXQ46Rw9qul9dGfcSwCCiNtyaaISNeNXTU5diuZQrW+rp0Z0tXDaVaSNEkuPo8aiv58VFIjHckaXAMM1d8gpF+xuj7iNPx39lmBoDAMoTmjJq6JfGZjvZjeUwfQpjxu0owd3BnO9pSLiTirXTtLfSJiMG9AjVaVBxnMtqlNTS6eThrQwKS8YVDi/KAYTCbnYPE79ervLC1aFWktM+iBs=
  - secure: sccuyDfQNilEe7P4vdgwtEM3dQRWSNVTyKT+/srUr+nshBj/+dX3W3Tdk/51ovGkRpqRGtCG5nrvxZjiix6uGrMib99Ct1h1GVILIHTRD0m7kCVlYo5lE2TXBOOAMkc3+B42p551hZ7wvuTxIntl8cTsq41GUzh69Q5v+fR/YCvcZf7rR4QuAqMQtL8JMUPnAuMsPcPP/v0FugnxuEgf6ydY7sVZiXwzQC0q5jVggOQqVM4UQxHHfTbCu44li2O09BuOsj18Ti92rpxaJmFE0/ZgfEWcz/CCdPH24ZlE2d192xvuf85TJOtHcxN/ayKM2UP17ljfLnD2/M+UNLeN9QRmysHQvh0LjmKCUMiyKV9DeZKg+HxF20zSKww96vDBLwP8QC7DMEnq2P6p9uh3Saw7UrP278ttNdTtOXR6N++fe+0BMzVxIF317UnNz7zkatZQtwU8BooGXHiRzKfclmKJ1AOIJrK77bE0Nz2ja8sq1+GXIxzeVOpFaUJ/fouoEqUR3wELaqB0CaHVzCvjpqANqAY/P7L/jChHvvONhKHb/WXAPFH7vHot03yoQ8IT9vsLFiSHwg5W26iAaaPEpHuGYdKryk/uT7/rS+T6YO58u5OBFxTYM9BKComEXd8d7EhffQawyLA9S9A7tcqP7YOUFmktqCiXFkrsRRyEIW0=
  - secure: ELp7ofGADQqapCfgjOxenRSM+kqIuPEiWkxthEjMwp2VFByfqasAzuZLY64tLJEYAQ+7gRlKEyCVEtBNJD61j6EWryjU+GfcPOy/8zJFmmPVM3fLoE3m36rzdfyXf9t0C1RJLukajdOguAC9tH3/aG4p6X/41U6Ln3H7r9m25fnHvefRLKNkURaYYAk6GzAEjgNaqi3FoVJwKa4cO1rgVLcQ7IoxPykYxBoO24rd/lsUObLIo9BZch5RMsJCbRK+lEf2N86YlNaHw9Sk6UkNy716WnDqvzquU3PPdI2KUJ/k2QivxKCfjPmxy6bBsjgfkji6yKAMQNodCxR1P20Iok/DHIc51Ycyf/7verqgiUd/+Rf6aifTdNLKZMhyM9VcW5gJhB4rZcAOoKfYEEmhOt93nNPl2CZVEiEHAdvxXntkJZvfYguTgWWbk0PTy5ugYmC0LpJkBb4BxSiFWINVG8C92miKW+8dFv/ZkTIimG10V1pfSOqrYBKuT5Tg+HURusIlo4gQTHo+Quxgcj89eFICVn/6fNCNzCu4LpTS+ovqrOfSfI473ZJNjv6Q7iArP5xb9IskHfSlJ7YX/0t+yR6eVMG6gvn4Mox6Y6o8oOqncBcoB0oy4MjNVL+MOymtGcBU4dxeYn/hWqH4xWY6hyMy13W+3D/ZDwQ124Q7TeM=
  - secure: v7CATn883yRYeOyNHeoFCsNmpnhZJHnoTueEpnKhY0EXBZG+yN9VC1+c2UseVef+F72Ul4CRH8F7WfXIVvPtf34blcvt7eJkGAQxFHxD+VT+yBfSnkfL/e4ytAxGvhBQxlaMWmMBcpAIusMqvdv3lqzUuvyhDoczXYPsYe63bKhl0PxsDGjoUA7ucSDey28KinWFAnd/Bcu5u7okY+zibZ9/tHfSKXDYPQUQfyvqhvxrCE1DtD2aJXe1z2BPoZR3t57PpPZ8WaihP0I5zZHlT3xUCyQpfkoaTZwX3NGG4b/z38n3s454oIQBZ2WxNuOZIRjG5jQuiqIcp9t1bJZ4uf1Pt6I6TULjnCXDEHPCL69V0Jf23uUoOw858Mndz5ybZfcjtbf7H4Wt1F6ZwQAYeC4nykU292qILnHuQd6GxWJ6vPDaen/yBrdIQA5/omMILutD8hnrOaOrYmZcv7mPzKSwg4dWhdqIu7vBv04/iLBMIbTOY04s+P8Gjl6JqxoAEh0fLxzzhshtg/CoVybMTX6WkFDhbITiMTVkzMYBG2IeR91iLe9ky7cDvPILEx2KcUYpP+BRH2haL2GH4nbmZDASGFrOUpAALDdoyaPsShBpxRrXwGJgezGLOqSAc3YAW48BDLTR70ssTsaBiyh8TF1OW1k/HabCpgJj4eAz8jw=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=eurekasvr-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
script:
- sh scripts/travis/tag_build.sh
- sh scripts/travis/build_services.sh
- sh scripts/travis/deploy_to_docker_hub.sh
- sh scripts/travis/deploy_to_amazon_ecs.sh
